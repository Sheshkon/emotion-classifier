{% extends "base.html" %}

{% load static %}

{% block title %}Profile Page{% endblock title %}

{% block extrahead %}
<link href="{% static '/css/accounts/profile.css' %}" rel="stylesheet">
{% endblock %}

{% block content %}
<h1>Edit Profile</h1>
<hr>
<div class="form-content">
    <form method="post" enctype="multipart/form-data">
        <div class="row">
            <!-- left column -->
            <div class="col-md-3 pe-5">
                <div class="text-center">
                    <div class="profile-image zoom" style="background-image: url('{{user.profile.avatar.url}}')"></div>
                    <h6 class="small">Upload a different photo...</h6>
                    <div style="position: relative">
                        <label style="display:block; margin:auto;">
                            {{ profile_form.avatar }}
                        </label>
                    </div>
                </div>
            </div>

            <!-- edit form column -->
            <div class="col-md-9 ps-3 personal-info">
                {% if user_form.errors %}
                <div class="alert alert-danger alert-dismissible" role="alert">
                    <div id="form_errors">
                        {% for key, value in user_form.errors.items %}
                        <strong>{{ value }}</strong>
                        {% endfor %}
                    </div>
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                {% endif %}

                {% csrf_token %}
                <div class="form-group">

                    <div class="col-lg-8">
                        <div class="form-row">
                            <label class="mb-2">Username:</label>
                            {{ user_form.username }}
                            <label class="mb-2 mt-2">Email:</label>
                            {{ user_form.email }}
                            <label class="mt-4">Bio:</label> {{ profile_form.bio }}
                        </div>
                    </div>
                </div>
                <p class="mt-3">Calculations image counts: {{ calcs_image_count }}</p>
                <a href="{% url 'password_reset' %}" class="small">Reset Password</a>
                <div class="mt-3">
                    <button type="submit" class="btn btn-success">Save Changes</button>
                    <button type="reset" class="btn btn-dark ms-2">Reset</button>
                </div>
            </div>
        </div>
    </form>
</div>
{% endblock content %}

{% block extrascript %}{% endblock %}
